---
title: "Virginia Quality Birth to Five System (VQB5) Evaluation & Analysis"
author: Doris Yan
format: revealjs
editor: visual
---

```{r}
library(tidyverse)
library(ggplot2)
library(here)
library(plotly)
library(readxl)
vqb5 <- read_excel("VQB5-Quality-Rating-Data-for-Website---2023-2024.xlsx")
```

```{r data cleaning, echo = FALSE, include = FALSE}
vqb5_cleaned <- vqb5 |>
  # keep variables relevant with quality ratings and results
  select(`Ready Region Name`, `Site Type`, `Site Name`, `Other Care Options`,  `Quality Rating`, `Interaction Points`, `Curriculum Points`, `Total Points`, `Operating Period`, `Ready Region Name`
         ) |>
  # transform all variable names to lower case and replace spaces with underscores for readability and reproducibility
  rename_with(~ str_replace_all
              (tolower(.), " ", "_")
              )
```

## Number of Sites in Each Quality Result Category

```{r}
quality_counts <- vqb5_cleaned |>
  group_by(quality_rating) |>
  summarise(site_count = n()) |>
  mutate(
    percent = round(100 * site_count / sum(site_count), 2)
  )

quality_counts
```

## Quality Ratings by Site Type

```{r}
# Summarize quality counts by site type
quality_by_site_type <- vqb5_cleaned |>
  group_by(site_type, quality_rating) |>
  summarise(site_count = n(), .groups = "drop") |>
  group_by(site_type) |>
  mutate(
    percent = round(100 * site_count / sum(site_count), 2),
    quality_rating = factor(
      quality_rating,
      levels = c("Exceeds Expectations", "Meets Expectations", "Needs Support")
    )
  )

# Create plot with custom hover text
p1 <- quality_by_site_type |>
  ggplot(aes(
    x = quality_rating,
    y = site_count,
    fill = quality_rating,
    text = paste0("Sites: ", site_count, "\nPercent: ", percent, "%")
  )) +
  geom_col() +
  facet_wrap(~ site_type) +
  scale_fill_manual(values = c(
    "Exceeds Expectations" = "#1b9e77",
    "Meets Expectations"   = "#7570b3",
    "Needs Support"        = "#d95f02"
  )) +
  labs(
    title = "Quality Ratings by Site Type",
    x = NULL,
    y = "Number of Sites",
    fill = "Quality Rating"
  ) +
  theme_minimal() +
  theme(
    panel.grid.major.x = element_blank(),
    axis.text.x = element_blank(),
    axis.ticks.x = element_blank()
  )

# Convert to interactive plotly, showing site count on hover
ggplotly(p1, tooltip = "text", width = 1000, height = 500)
```

## Quality Ratings by Ready Region

```{r}
# Summarize quality counts by ready region name
quality_by_ready_region <- vqb5_cleaned |>
  group_by(ready_region_name, quality_rating) |>
  summarise(region_count = n(), .groups = "drop") |>
  group_by(ready_region_name) |>
  mutate(
    percent = round(100 * region_count / sum(region_count), 2),
    quality_rating = factor(
      quality_rating,
      levels = c("Exceeds Expectations", "Meets Expectations", "Needs Support")
    )
  )

# Create plot with custom hover text
p2 <- quality_by_ready_region |>
  ggplot(aes(
    x = quality_rating,
    y = region_count,
    fill = quality_rating,
    text = paste0("Sites: ", region_count, "\nPercent: ", percent, "%")
  )) +
  geom_col() +
  facet_wrap(~ ready_region_name) +
  scale_fill_manual(values = c(
    "Exceeds Expectations" = "#1b9e77",
    "Meets Expectations"   = "#7570b3",
    "Needs Support"        = "#d95f02"
  )) +
  labs(
    title = "Quality Ratings by Ready Region",
    x = NULL,
    y = "Number of Sites",
    fill = "Quality Rating"
  ) +
  theme_minimal() +
  theme(
    panel.grid.major.x = element_blank(),
    axis.text.x = element_blank(),
    axis.ticks.x = element_blank()
  )

# Convert to interactive plotly, showing site count on hover
ggplotly(p2, tooltip = "text", width = 1000, height = 600)
```

## Takeaways

<div style="font-size:30px; line-height:1.6;">

- **Most VQB5 sites “Meet Expectations” (~96%)**, indicating strong alignment with Virginia's early education quality standards.

- **Public schools show the strongest quality performance overall**:  
  - 0% of public school sites are rated “Needs Support”  
  - Public schools have the highest share of sites rated “Exceeds Expectations” among all site types, at **3.74%**

- **Family Day Homes have the highest share of sites rated “Needs Support”**, at **5.17%**, compared to Centers (0.79%) and Public Schools (0%)

- **Capital Area has the highest percentage of sites needing support (3.89%)** and the lowest percentage meeting expectations (**91.83%**) among all regions, despite having the **largest total site count**

</div>
